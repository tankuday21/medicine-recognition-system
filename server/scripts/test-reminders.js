const mongoose = require('mongoose');\nconst reminderService = require('../services/reminderService');\nconst { User } = require('../models');\n\n// Test reminder functionality\nasync function testReminders() {\n  try {\n    console.log('ðŸ§ª Testing Reminder Service...');\n    \n    // Create a test user if needed\n    let testUser = await User.findOne({ email: 'test@example.com' });\n    if (!testUser) {\n      testUser = new User({\n        name: 'Test User',\n        email: 'test@example.com',\n        password: 'hashedpassword',\n        preferences: {\n          language: 'en',\n          timezone: 'UTC',\n          notifications: {\n            reminders: true,\n            adherence: true,\n            news: false\n          }\n        }\n      });\n      await testUser.save();\n      console.log('âœ… Test user created');\n    }\n    \n    // Test creating a reminder\n    const reminderData = {\n      medicineName: 'Test Medicine',\n      dosage: '500mg',\n      frequency: 'twice',\n      startDate: new Date().toISOString(),\n      times: ['08:00', '20:00'],\n      notes: 'Test reminder for development'\n    };\n    \n    console.log('ðŸ“ Creating test reminder...');\n    const createResult = await reminderService.createReminder(testUser._id, reminderData);\n    \n    if (createResult.success) {\n      console.log('âœ… Reminder created successfully:', createResult.data._id);\n      \n      // Test getting user reminders\n      console.log('ðŸ“‹ Getting user reminders...');\n      const remindersResult = await reminderService.getUserReminders(testUser._id);\n      \n      if (remindersResult.success) {\n        console.log('âœ… Found', remindersResult.data.reminders.length, 'reminders');\n        \n        // Test getting todays schedule\n        console.log('ðŸ“… Getting todays schedule...');\n        const todayResult = await reminderService.getTodaysReminders(testUser._id);\n        \n        if (todayResult.success) {\n          console.log('âœ… Todays schedule:', todayResult.data.length, 'items');\n          \n          // Test logging a dose\n          if (todayResult.data.length > 0) {\n            const firstItem = todayResult.data[0];\n            console.log('ðŸ’Š Logging dose as taken...');\n            \n            const logResult = await reminderService.logDose(\n              testUser._id,\n              firstItem.reminderId,\n              {\n                scheduledTime: firstItem.scheduledTime,\n                status: 'taken'\n              }\n            );\n            \n            if (logResult.success) {\n              console.log('âœ… Dose logged successfully');\n              \n              // Test adherence stats\n              console.log('ðŸ“Š Getting adherence stats...');\n              const statsResult = await reminderService.getAdherenceStats(testUser._id, 'week');\n              \n              if (statsResult.success) {\n                console.log('âœ… Adherence stats:', statsResult.data);\n              } else {\n                console.error('âŒ Failed to get adherence stats:', statsResult.message);\n              }\n            } else {\n              console.error('âŒ Failed to log dose:', logResult.message);\n            }\n          }\n        } else {\n          console.error('âŒ Failed to get todays schedule:', todayResult.message);\n        }\n      } else {\n        console.error('âŒ Failed to get reminders:', remindersResult.message);\n      }\n    } else {\n      console.error('âŒ Failed to create reminder:', createResult.message);\n    }\n    \n    console.log('ðŸŽ‰ Reminder service test completed!');\n    \n  } catch (error) {\n    console.error('ðŸ’¥ Test failed:', error);\n  }\n}\n\n// Run the test\nif (require.main === module) {\n  testReminders().then(() => {\n    console.log('Test completed');\n  }).catch(error => {\n    console.error('Test error:', error);\n  });\n}\n\nmodule.exports = testReminders;"} 
</invoke>